<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Newton's Laws of Motion</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      color: #333;
      padding: 40px;
    }
    .content {
      max-width: 800px;
      margin: auto;
    }
    .pen-icon {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 30px;
      height: 30px;
      cursor: pointer;
      opacity: 0.6;
      transition: opacity 0.3s;
      z-index: 1000;
    }
    .pen-icon:hover {
      opacity: 1;
    }
    .disable-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 6px 12px;
      font-size: 14px;
      cursor: pointer;
      background: #e74c3c;
      color: #fff;
      border: none;
      border-radius: 4px;
      z-index: 1000;
    }
    .control-panel {
      display: none;
      position: fixed;
      bottom: 270px;
      right: 20px;
      background: #222;
      color: white;
      padding: 8px;
      border-radius: 8px;
      z-index: 999;
    }
    .control-panel button {
      margin: 0 4px;
      padding: 6px 10px;
      border: none;
      background: #555;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }
    .control-panel button:hover {
      background: #777;
    }
    #jitsi-container {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 320px;
      height: 240px;
      resize: both;
      overflow: hidden;
      z-index: 998;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      border-radius: 10px;
      background: white;
      cursor: move;
    }
  </style>
</head>
<body>

  <!-- Pen Icon -->
  <img src="https://img.icons8.com/ios-filled/50/000000/pen.png"
       class="pen-icon" id="penIcon"
       alt="Toggle Meet" onclick="toggleMeet()" />

  <!-- Disable Button -->
  <button class="disable-btn" onclick="disableControls()">Disable Call Access</button>

  <!-- Control Panel -->
  <div class="control-panel" id="controlPanel">
    <button onclick="api.executeCommand('toggleAudio')">üéôÔ∏è Mic</button>
    <button onclick="api.executeCommand('toggleVideo')">üì∑ Cam</button>
    <button onclick="api.executeCommand('hangup')">‚ùå Leave</button>
  </div>

  <!-- Jitsi Meet Container -->
  <div id="jitsi-container"></div>

  <!-- Blog Content -->
  <div class="content">
    <h1>Newton's Laws of Motion</h1>
    <h2>First Law</h2>
    <p>An object at rest stays at rest and an object in motion stays in motion unless acted upon by an unbalanced force.</p>
    <h2>Second Law</h2>
    <p>The acceleration of an object depends on the net force acting upon it and its mass (F = ma).</p>
    <h2>Third Law</h2>
    <p>For every action, there is an equal and opposite reaction.</p>
  </div>

  <!-- Jitsi Meet API -->
  <script src="https://meet.jit.si/external_api.js"></script>
  <script>
    let controlsEnabled = true;
    let api = null;
    const domain = "meet.jit.si";
    const roomName = "bloodymarry";
    const jitsiContainer = document.getElementById("jitsi-container");
    const controlPanel = document.getElementById("controlPanel");

    function startJitsi() {
      if (api) return;

      const options = {
        roomName,
        parentNode: jitsiContainer,
        width: "100%",
        height: "100%",
        interfaceConfigOverwrite: {
          TOOLBAR_BUTTONS: []
        },
        configOverwrite: {
          startWithAudioMuted: false,
          startWithVideoMuted: false,
        }
      };
      api = new JitsiMeetExternalAPI(domain, options);

      // Resize awareness
      const observer = new ResizeObserver(() => {
        if (api) api.resize();
      });
      observer.observe(jitsiContainer);
    }

    function toggleMeet() {
      if (!controlsEnabled) return;
      if (jitsiContainer.style.display === "none") {
        jitsiContainer.style.display = "block";
        controlPanel.style.display = "block";
        startJitsi();
      } else {
        jitsiContainer.style.display = "none";
        controlPanel.style.display = "none";
      }
    }

    function disableControls() {
      controlsEnabled = false;
      document.getElementById("penIcon").style.display = "none";
      jitsiContainer.style.display = "none";
      controlPanel.style.display = "none";
      alert("Call access disabled.");
    }

    // Keyboard Shortcuts
    document.addEventListener("keydown", (e) => {
      if (!controlsEnabled) return;
      if (e.ctrlKey && e.key === "x") {
        jitsiContainer.style.display = "block";
        controlPanel.style.display = "block";
        startJitsi();
      } else if (e.ctrlKey && e.key === "z") {
        jitsiContainer.style.display = "none";
        controlPanel.style.display = "none";
      } else if (e.ctrlKey && e.key === "b") {
        if (api) api.executeCommand('hangup');
      }
    });

    // Drag logic
    jitsiContainer.addEventListener('mousedown', function(e) {
      let offsetX = e.clientX - jitsiContainer.offsetLeft;
      let offsetY = e.clientY - jitsiContainer.offsetTop;

      function mouseMoveHandler(e) {
        jitsiContainer.style.left = (e.clientX - offsetX) + 'px';
        jitsiContainer.style.top = (e.clientY - offsetY) + 'px';
        jitsiContainer.style.bottom = 'auto';
        jitsiContainer.style.right = 'auto';
      }

      function mouseUpHandler() {
        document.removeEventListener('mousemove', mouseMoveHandler);
        document.removeEventListener('mouseup', mouseUpHandler);
      }

      document.addEventListener('mousemove', mouseMoveHandler);
      document.addEventListener('mouseup', mouseUpHandler);
    });
  </script>

</body>
</html>
